# ========================================
# DEFAULT PROFILE: DEV
# ========================================
# Tip: Do NOT force prod by default. Override with --spring.profiles.active=prod when needed.
spring:
  profiles:
    active: dev

  # ========================================
  # COMMON CONFIGURATION (ap dung cho tat ca profiles)
  # ========================================

  # Application Info
  application:
    name: Blog API
  cache:
    type: redis
    redis:
      time-to-live: 600000 # Default 10 minutes (milliseconds)
      cache-null-values: false
      key-prefix: "blogapi:"
      use-key-prefix: true
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:}
      timeout: 2000ms

      # Lettuce Connection Pool
      lettuce:
        pool:
          max-active: 8 # Max connections
          max-idle: 8 # Max idle connections
          min-idle: 2 # Min idle connections
          max-wait: -1ms # Max wait time (-1 = unlimited)
        shutdown-timeout: 100ms

# ========================================
# SERVER CONFIGURATION
# ========================================
server:
  port: 8080
  error:
    include-message: always
    include-binding-errors: always

# ========================================
# SWAGGER/OPENAPI CONFIGURATION
# ========================================
springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui.html
    operationsSorter: method

# ========================================
# LOGGING
# ========================================
logging:
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
  level:
    root: INFO
    com.example.blogapi.service.CleanupSchedulerService: INFO

# ========================================
# SECURITY (Basic Auth - Phase 1)
# ========================================
# JWT se duoc config rieng trong tung profile
app:
  jwt:
    secret: ${JWT_SECRET}
    expiration: 86400000
# Application-specific configurations
  cleanup:
    enabled: true
    retention-days: 30
    cron: "0 0 2 * * ?"


  